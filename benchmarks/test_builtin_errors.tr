"""Test builtin error cases - identify which ones are caught and which crash"""

print("=" * 80)
print("TESTING BUILTIN ERROR HANDLING")
print("=" * 80)

passed = 0
failed = 0

# ============================================================================
# 1. ValueError Tests
# ============================================================================
print("\n[1] ValueError Cases")
print("-" * 80)

try:
    result = int('not_a_number')
    print("❌ Test 1.1: int('not_a_number') - No exception raised")
    failed = failed + 1
except ValueError as e:
    print("✅ Test 1.1: int('not_a_number') - ValueError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 1.1: int('not_a_number') - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = float('invalid')
    print("❌ Test 1.2: float('invalid') - No exception raised")
    failed = failed + 1
except ValueError as e:
    print("✅ Test 1.2: float('invalid') - ValueError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 1.2: float('invalid') - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = min([])
    print("❌ Test 1.3: min([]) - No exception raised")
    failed = failed + 1
except ValueError as e:
    print("✅ Test 1.3: min([]) - ValueError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 1.3: min([]) - Wrong exception: {type(e).__name__}")
    failed = failed + 1

# ============================================================================
# 2. TypeError Tests
# ============================================================================
print("\n[2] TypeError Cases")
print("-" * 80)

try:
    result = len(42)
    print("❌ Test 2.1: len(42) - No exception raised")
    failed = failed + 1
except TypeError as e:
    print("✅ Test 2.1: len(42) - TypeError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 2.1: len(42) - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = 1 + "str"
    print("❌ Test 2.2: 1 + 'str' - No exception raised")
    failed = failed + 1
except TypeError as e:
    print("✅ Test 2.2: 1 + 'str' - TypeError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 2.2: 1 + 'str' - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = "hello" * 3.5
    print("❌ Test 2.3: 'hello' * 3.5 - No exception raised")
    failed = failed + 1
except TypeError as e:
    print("✅ Test 2.3: 'hello' * 3.5 - TypeError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 2.3: 'hello' * 3.5 - Wrong exception: {type(e).__name__}")
    failed = failed + 1

# ============================================================================
# 3. IndexError Cases
# ============================================================================
print("\n[3] IndexError Cases")
print("-" * 80)

try:
    result = [1, 2, 3][10]
    print("❌ Test 3.1: [1,2,3][10] - No exception raised")
    failed = failed + 1
except IndexError as e:
    print("✅ Test 3.1: [1,2,3][10] - IndexError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 3.1: [1,2,3][10] - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = "hello"[100]
    print("❌ Test 3.2: 'hello'[100] - No exception raised")
    failed = failed + 1
except IndexError as e:
    print("✅ Test 3.2: 'hello'[100] - IndexError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 3.2: 'hello'[100] - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = (1, 2, 3)[5]
    print("❌ Test 3.3: (1,2,3)[5] - No exception raised")
    failed = failed + 1
except IndexError as e:
    print("✅ Test 3.3: (1,2,3)[5] - IndexError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 3.3: (1,2,3)[5] - Wrong exception: {type(e).__name__}")
    failed = failed + 1

# ============================================================================
# 4. KeyError Cases
# ============================================================================
print("\n[4] KeyError Cases")
print("-" * 80)

try:
    result = {'a': 1}['b']
    print("❌ Test 4.1: {'a': 1}['b'] - No exception raised")
    failed = failed + 1
except KeyError as e:
    print("✅ Test 4.1: {'a': 1}['b'] - KeyError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 4.1: {'a': 1}['b'] - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = {}['key']
    print("❌ Test 4.2: {}['key'] - No exception raised")
    failed = failed + 1
except KeyError as e:
    print("✅ Test 4.2: {}['key'] - KeyError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 4.2: {}['key'] - Wrong exception: {type(e).__name__}")
    failed = failed + 1

# ============================================================================
# 5. ZeroDivisionError Cases
# ============================================================================
print("\n[5] ZeroDivisionError Cases")
print("-" * 80)

try:
    result = 10 / 0
    print("❌ Test 5.1: 10 / 0 - No exception raised")
    failed = failed + 1
except ZeroDivisionError as e:
    print("✅ Test 5.1: 10 / 0 - ZeroDivisionError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 5.1: 10 / 0 - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = 10.0 / 0.0
    print("❌ Test 5.2: 10.0 / 0.0 - No exception raised")
    failed = failed + 1
except ZeroDivisionError as e:
    print("✅ Test 5.2: 10.0 / 0.0 - ZeroDivisionError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 5.2: 10.0 / 0.0 - Wrong exception: {type(e).__name__}")
    failed = failed + 1

try:
    result = 10 % 0
    print("❌ Test 5.3: 10 % 0 - No exception raised")
    failed = failed + 1
except ZeroDivisionError as e:
    print("✅ Test 5.3: 10 % 0 - ZeroDivisionError caught")
    passed = passed + 1
except Exception as e:
    print(f"⚠️ Test 5.3: 10 % 0 - Wrong exception: {type(e).__name__}")
    failed = failed + 1

# ============================================================================
# SUMMARY
# ============================================================================
print("\n" + "=" * 80)
print("SUMMARY")
print("=" * 80)
total = passed + failed
print(f"Tests Run: {total}")
print(f"Tests Passed (Exception Caught Correctly): {passed}")
print(f"Tests Failed (Wrong Exception or Crashed): {failed}")
if total > 0:
    print(f"Success Rate: {passed}/{total} ({100*passed//total}%)")

if failed > 0:
    print(f"\n⚠️  {failed} error cases have issues!")
    print("These are the cases that need investigation/fixes in the Tauraro VM backend.")
else:
    print("\n✅ All error cases are being caught properly!")

print("=" * 80)
