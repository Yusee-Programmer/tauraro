# Minimal GTK test
print("Loading GTK test...")

import sys

_gtk_lib = "libgtk-3-0.dll"

print("Loading GTK3 libraries...")
try:
    load_library(_gtk_lib)
    print("  [OK] GTK3 libraries loaded successfully")
except:
    print("  [!] Warning: Could not load GTK3 libraries: ")
    print("  Please install GTK3 for your platform:")

print("Defining GTK3 functions...")
define_function(_gtk_lib, "gtk_init", "void", ["pointer", "pointer"])

print("  [OK] GTK3 functions defined successfully")

_gtk_initialized = False

def init_gtk():
    global _gtk_initialized
    if not _gtk_initialized:
        try:
            call_function(_gtk_lib, "gtk_init", [0, 0])
            _gtk_initialized = True
            print("  [OK] GTK initialized successfully")
        except:
            print("  [X] Failed to initialize GTK: ")
            pass

class Widget:
    def __init__(self, widget_ptr):
        self.widget = widget_ptr

try:
    class Window(Widget):
        def __init__(self, title="Window"):
            self.title = title

    class Application:
        def __init__(self, name="GTK Application"):
            self.name = name
            init_gtk()

        def run(self):
            try:
                call_function(_gtk_lib, "gtk_main", [])
            except:
                print("Error in main loop: ")
            return 0

    print("  [OK] Window and widget classes loaded")
except:
    print("  [!] Error loading classes: ")

print("")
print("GTK module loaded successfully!")
