# Test memory management decorators in compiled mode

@manual_memory
def test_manual():
    # This function should use manual memory management
    buffer = allocate(1024)
    print("Manual mode: allocated 1024 bytes")
    free(buffer)
    print("Manual mode: freed buffer")
    return 1

@arena_memory  
def test_arena():
    # This function should use arena memory
    create_arena("test")
    buf1 = allocate(512)
    buf2 = allocate(256)
    print("Arena mode: allocated buffers")
    destroy_arena("test")
    print("Arena mode: destroyed arena")
    return 1

@auto_memory
def test_auto():
    # This function uses automatic memory (default)
    data = [1, 2, 3, 4, 5]
    print("Auto mode: created list")
    return 1

# Main
print("=== Testing Memory Decorators ===")
r1: int = test_manual()
r2: int = test_arena()
r3: int = test_auto()
print("=== All decorator tests passed ===")
